(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{2826:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/api-test",function(){return n(5973)}])},5973:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(7876),s=n(4232);function i(e){return new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return null!=t})).toString()}async function r(e,t){try{let n=await fetch("".concat("http://10.0.50.84:8000/ccm/shift").concat(e),{...t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")),...null==t?void 0:t.headers}});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(e){return{status:{success:!1,message:e instanceof Error?e.message:"API request failed",timestamp:new Date().toISOString()},data:null}}}let o={timezones:{list:async()=>r("/timezones"),get:async e=>r("/timezones/".concat(e))},operators:{list:async e=>r("/operators/profiles?".concat(i(e))),create:async e=>r("/operators/profiles",{method:"POST",body:JSON.stringify(e)}),get:async e=>r("/operators/profiles/".concat(e)),update:async(e,t)=>r("/operators/profiles/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>r("/operators/profiles/".concat(e),{method:"DELETE"}),getByUserId:async e=>r("/operators/profiles/user/".concat(e))},events:{list:async e=>r("/events?".concat(i(e))),create:async e=>r("/events",{method:"POST",body:JSON.stringify(e)}),get:async e=>r("/events/".concat(e)),update:async(e,t)=>r("/events/".concat(e),{method:"PUT",body:JSON.stringify(t)}),approve:async(e,t)=>r("/events/".concat(e,"/approve"),{method:"POST",body:JSON.stringify({status:"approved",note:t})}),cancel:async(e,t)=>r("/events/".concat(e,"/cancel?note=").concat(encodeURIComponent(t)),{method:"POST"}),checkConflict:async e=>r("/events/check-conflict?".concat(i(e)))},regions:{list:async e=>r("/regions?".concat(i(e))),create:async e=>r("/regions",{method:"POST",body:JSON.stringify(e)}),get:async e=>r("/regions/".concat(e))}};var c=n(209),l=n(6555),d=n(3362),h=n(7835),u=n(4854),g=n(5938),p=n(4169),x=n(3498),v=n(690),y=n(5395);function m(){let[e,t]=(0,s.useState)(null),[n,i]=(0,s.useState)(""),[r,m]=(0,s.useState)({assigneeId:"",startTime:new Date().toISOString(),durationMinutes:60}),[A,j]=(0,s.useState)([]),[f,T]=(0,s.useState)(""),[C,S]=(0,s.useState)({userId:"test-user-123",name:"Test Operator",location:"Test Location",region:"Test Region",isActive:!0}),[O,I]=(0,s.useState)({eventId:"",note:""}),[b,w]=(0,s.useState)(""),E=async()=>{let e=await o.timezones.list();j(e.data.items),t(e)},k=async()=>{t(await o.operators.update(f,C))},N=async()=>{t(await o.operators.delete(f))},P=async()=>{t(await o.events.approve(O.eventId,O.note))},_=async()=>{t(await o.events.cancel(O.eventId,O.note))},B=async()=>{t(await o.regions.list({country:b}))},D=async()=>{t(await o.operators.list({activeOnly:!0}))},R=async()=>{t(await o.operators.create({userId:"test-user-123",name:"Test Operator",location:"Test Location",timezoneId:"UTC",region:"Test Region",isActive:!0}))},z=async()=>{let e={assigneeId:r.assigneeId,startTime:r.startTime,durationMinutes:r.durationMinutes,type:"shift",status:"pending",timezoneId:"UTC",details:"Test shift event"};t(await o.events.create(e))},U=async()=>{t(await o.regions.create({name:"Test Region",country:"Test Country",city:"Test City"}))};return(0,a.jsxs)(c.A,{maxWidth:"md",children:[(0,a.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Shift API Test Interface"}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Operator Endpoints"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,a.jsx)(h.A,{variant:"contained",onClick:D,children:"List Active Operators"}),(0,a.jsx)(h.A,{variant:"contained",onClick:R,children:"Create Test Operator"})]})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Event Endpoints"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[(0,a.jsx)(u.A,{label:"Assignee ID",value:r.assigneeId,onChange:e=>m({...r,assigneeId:e.target.value})}),(0,a.jsx)(h.A,{variant:"contained",onClick:z,children:"Create Test Event"})]})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Region Endpoints"}),(0,a.jsx)(h.A,{variant:"contained",onClick:U,children:"Create Test Region"})]}),(0,a.jsxs)(g.A,{sx:{p:2},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"API Response:"}),(0,a.jsx)("pre",{children:JSON.stringify(e,null,2)})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Operator Management"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[(0,a.jsx)(u.A,{label:"Operator ID",value:f,onChange:e=>T(e.target.value)}),(0,a.jsx)(u.A,{label:"Name",value:C.name,onChange:e=>S({...C,name:e.target.value})}),(0,a.jsx)(u.A,{label:"Location",value:C.location,onChange:e=>S({...C,location:e.target.value})}),(0,a.jsx)(h.A,{variant:"contained",onClick:k,children:"Update Operator"}),(0,a.jsx)(h.A,{variant:"contained",color:"error",onClick:N,children:"Delete Operator"})]})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Timezone Endpoints"}),(0,a.jsx)(d.A,{sx:{display:"flex",gap:2},children:(0,a.jsx)(h.A,{variant:"contained",onClick:E,children:"List Timezones"})}),(0,a.jsx)(p.A,{in:A.length>0,children:(0,a.jsx)(x.A,{sx:{maxHeight:200,overflow:"auto",mt:2},children:A.map(e=>(0,a.jsx)(v.Ay,{children:(0,a.jsx)(y.A,{primary:e.id,secondary:e.name})},e.id))})})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Event Actions"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[(0,a.jsx)(u.A,{label:"Event ID",value:O.eventId,onChange:e=>I({...O,eventId:e.target.value})}),(0,a.jsx)(u.A,{label:"Note",value:O.note,onChange:e=>I({...O,note:e.target.value})}),(0,a.jsx)(h.A,{variant:"contained",color:"success",onClick:P,children:"Approve Event"}),(0,a.jsx)(h.A,{variant:"contained",color:"warning",onClick:_,children:"Cancel Event"})]})]}),(0,a.jsxs)(d.A,{sx:{mb:4},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Region Search"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2},children:[(0,a.jsx)(u.A,{label:"Search by Country",value:b,onChange:e=>w(e.target.value)}),(0,a.jsx)(h.A,{variant:"contained",onClick:B,children:"Search Regions"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[46,636,593,792],()=>t(2826)),_N_E=e.O()}]);